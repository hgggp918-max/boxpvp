<!DOCTYPE html>
<html lang="tr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Herz</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=Space+Mono:wght@400;700&display=swap"
        rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        dark: { 900: '#050507', 800: '#0a0a10', 700: '#101018', 600: '#16161f', 500: '#1c1c28', 400: '#252535', 300: '#35354a' },
                        accent: { DEFAULT: '#a855f7', light: '#c084fc', dark: '#7c3aed', glow: 'rgba(168,85,247,0.4)' },
                        text: { primary: '#f0f0f5', secondary: '#9898b0', muted: '#5a5a75' }
                    },
                    fontFamily: {
                        display: ['Space Mono', 'monospace'],
                        body: ['Inter', 'sans-serif']
                    },
                    animation: {
                        'float': 'float 6s ease-in-out infinite',
                        'pulse-glow': 'pulse-glow 2s ease-in-out infinite',
                        'spin-wheel': 'spin-wheel var(--spin-duration, 4s) cubic-bezier(0.17, 0.67, 0.12, 0.99) forwards'
                    },
                    keyframes: {
                        float: { '0%, 100%': { transform: 'translateY(0px)' }, '50%': { transform: 'translateY(-15px)' } },
                        'pulse-glow': { '0%, 100%': { boxShadow: '0 0 20px rgba(168,85,247,0.25)' }, '50%': { boxShadow: '0 0 40px rgba(168,85,247,0.5)' } },
                        'spin-wheel': { '0%': { transform: 'rotate(0deg)' }, '100%': { transform: 'rotate(var(--spin-deg, 1800deg))' } }
                    }
                }
            }
        }
    </script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { overflow-x: hidden; }

        .glass-card {
            background: rgba(20, 20, 35, 0.6);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(168, 85, 247, 0.1);
            border-radius: 1rem;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .glass-card:hover {
            border-color: rgba(168, 85, 247, 0.3);
            transform: translateY(-4px);
            box-shadow: 0 20px 60px rgba(168, 85, 247, 0.1);
        }

        .btn-primary {
            background: linear-gradient(135deg, #7c3aed, #a855f7);
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }
        .btn-primary::before {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(135deg, #a855f7, #c084fc);
            opacity: 0;
            transition: opacity 0.3s;
        }
        .btn-primary:hover::before { opacity: 1; }
        .btn-primary span, .btn-primary svg { position: relative; z-index: 1; }

        .gradient-orb {
            position: absolute;
            border-radius: 50%;
            filter: blur(120px);
            pointer-events: none;
        }

        .bg-grid {
            background-image: radial-gradient(rgba(168,85,247,0.06) 1px, transparent 1px);
            background-size: 40px 40px;
        }

        .text-gradient {
            background: linear-gradient(135deg, #a855f7, #c084fc, #e879f9);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .link-card {
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .link-card:hover {
            transform: translateY(-6px) scale(1.02);
        }

        .hero-gradient {
            background: radial-gradient(ellipse at 50% 0%, rgba(168,85,247,0.15) 0%, transparent 60%);
        }

        .particle {
            position: absolute;
            width: 2px;
            height: 2px;
            background: rgba(168, 85, 247, 0.5);
            border-radius: 50%;
            animation: particle-float linear infinite;
        }

        @keyframes particle-float {
            0% { transform: translateY(0) translateX(0); opacity: 0; }
            10% { opacity: 1; }
            90% { opacity: 1; }
            100% { transform: translateY(-100vh) translateX(50px); opacity: 0; }
        }

        /* Wheel styles */
        .wheel-container {
            position: relative;
            width: 340px;
            height: 340px;
        }
        @media (min-width: 640px) {
            .wheel-container {
                width: 400px;
                height: 400px;
            }
        }

        .wheel-canvas {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            border: 4px solid rgba(168, 85, 247, 0.5);
            box-shadow: 0 0 40px rgba(168, 85, 247, 0.2), inset 0 0 30px rgba(0,0,0,0.3);
        }

        .wheel-pointer {
            position: absolute;
            top: -18px;
            left: 50%;
            transform: translateX(-50%);
            width: 0;
            height: 0;
            border-left: 16px solid transparent;
            border-right: 16px solid transparent;
            border-top: 32px solid #a855f7;
            filter: drop-shadow(0 4px 12px rgba(168,85,247,0.5));
            z-index: 10;
        }

        .wheel-center {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: linear-gradient(135deg, #7c3aed, #a855f7);
            box-shadow: 0 0 20px rgba(168,85,247,0.5);
            z-index: 5;
        }

        .spinning .wheel-canvas {
            animation: spin-wheel var(--spin-duration, 4s) cubic-bezier(0.17, 0.67, 0.12, 0.99) forwards;
        }

        @keyframes spin-wheel {
            0% { transform: rotate(var(--start-deg, 0deg)); }
            100% { transform: rotate(var(--spin-deg, 1800deg)); }
        }

        .result-popup {
            animation: popup 0.5s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
        }
        @keyframes popup {
            0% { transform: scale(0.5); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }

        .tag-item {
            animation: tag-in 0.2s ease-out forwards;
        }
        @keyframes tag-in {
            0% { transform: scale(0.8); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }

        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #0a0a10; }
        ::-webkit-scrollbar-thumb { background: #35354a; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #a855f7; }
    </style>
</head>

<body class="bg-dark-900 text-text-primary min-h-screen font-body">
    <!-- Audio -->
    <audio id="bgMusic" src="Pardon.wav" loop preload="auto" autoplay></audio>

    <!-- Music Player -->
    <div id="musicPlayer" class="fixed bottom-6 left-6 z-50 flex items-center gap-3 glass-card px-4 py-3 cursor-pointer select-none" style="border-color: rgba(168,85,247,0.2);">
        <button id="musicToggle" onclick="toggleMusic()" class="w-9 h-9 rounded-lg bg-accent/20 flex items-center justify-center hover:bg-accent/30 transition-colors flex-shrink-0">
            <svg id="iconPlay" class="w-5 h-5 text-accent hidden" fill="currentColor" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg>
            <svg id="iconPause" class="w-5 h-5 text-accent hidden" fill="currentColor" viewBox="0 0 24 24"><path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/></svg>
            <svg id="iconMuted" class="w-5 h-5 text-text-muted hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z"/><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2"/></svg>
        </button>
        <input id="volumeSlider" type="range" min="0" max="100" value="50" oninput="changeVolume(this.value)"
            class="w-20 sm:w-24 h-1.5 rounded-full appearance-none cursor-pointer"
            style="background: linear-gradient(to right, #a855f7 50%, #252535 50%);">
        <span id="volumeLabel" class="text-text-muted text-xs font-mono w-8 text-right">50%</span>
    </div>

    <!-- Background effects -->
    <div class="fixed inset-0 pointer-events-none">
        <div class="hero-gradient absolute inset-0"></div>
        <div id="particles" class="absolute inset-0"></div>
    </div>

    <!-- Hero / Links Section -->
    <section class="relative min-h-screen flex flex-col items-center justify-center bg-grid overflow-hidden">
        <div class="gradient-orb w-[500px] h-[500px] bg-purple-600/15 top-0 left-1/2 -translate-x-1/2"></div>
        <div class="gradient-orb w-[300px] h-[300px] bg-violet-500/10 bottom-1/4 right-0"></div>

        <div class="relative z-10 max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-16 text-center">

            <h1 class="font-display text-4xl sm:text-5xl lg:text-6xl font-bold mb-4">
                <span class="text-gradient">Herz</span>
            </h1>
            <p class="text-text-secondary text-lg sm:text-xl mb-12 max-w-md mx-auto font-light">
                Beni sosyal medyada takip et!
            </p>

            <!-- Social Links -->
            <div class="grid gap-4 max-w-md mx-auto mb-16">
              
                <!-- Tiktok -->
                <a href="https://www.tiktok.com/@nogindr5?lang=tr-TR" target="_blank" rel="noopener noreferrer"
                    class="link-card glass-card flex items-center gap-4 px-6 py-4 group">
                    <div class="w-12 h-12 rounded-xl bg-indigo-500/20 flex items-center justify-center flex-shrink-0 group-hover:bg-indigo-500/30 transition-colors">
                        <svg class="w-6 h-6 text-indigo-400" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0 12.64 12.64 0 0 0-.617-1.25.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 0 0 .031.057 19.9 19.9 0 0 0 5.993 3.03.078.078 0 0 0 .084-.028 14.09 14.09 0 0 0 1.226-1.994.076.076 0 0 0-.041-.106 13.107 13.107 0 0 1-1.872-.892.077.077 0 0 1-.008-.128 10.2 10.2 0 0 0 .372-.292.074.074 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.12.098.246.198.373.292a.077.077 0 0 1-.006.127 12.299 12.299 0 0 1-1.873.892.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028 19.839 19.839 0 0 0 6.002-3.03.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.03zM8.02 15.33c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.956-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.956 2.418-2.157 2.418zm7.975 0c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.956-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.946 2.418-2.157 2.418z"/>
                        </svg>
                    </div>
                    <div class="text-left flex-1">
                        <span class="font-semibold text-lg text-text-primary group-hover:text-indigo-400 transition-colors">Tiktok</span>
                        <p class="text-text-muted text-sm">Hz225</p>
                    </div>
                    <svg class="w-5 h-5 text-text-muted group-hover:text-indigo-400 group-hover:translate-x-1 transition-all" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                    </svg>
                </a>

               

                <!-- BrutalNetwork Discord -->
                <a href="https://discord.gg/vUCnx6t3Ex" target="_blank" rel="noopener noreferrer"
                    class="link-card glass-card flex items-center gap-4 px-6 py-4 group">
                    <div class="w-12 h-12 rounded-xl bg-indigo-500/20 flex items-center justify-center flex-shrink-0 group-hover:bg-indigo-500/30 transition-colors">
                        <svg class="w-6 h-6 text-indigo-400" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0 12.64 12.64 0 0 0-.617-1.25.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 0 0 .031.057 19.9 19.9 0 0 0 5.993 3.03.078.078 0 0 0 .084-.028 14.09 14.09 0 0 0 1.226-1.994.076.076 0 0 0-.041-.106 13.107 13.107 0 0 1-1.872-.892.077.077 0 0 1-.008-.128 10.2 10.2 0 0 0 .372-.292.074.074 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.12.098.246.198.373.292a.077.077 0 0 1-.006.127 12.299 12.299 0 0 1-1.873.892.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028 19.839 19.839 0 0 0 6.002-3.03.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.03zM8.02 15.33c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.956-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.956 2.418-2.157 2.418zm7.975 0c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.956-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.946 2.418-2.157 2.418z"/>
                        </svg>
                    </div>
                    <div class="text-left flex-1">
                        <span class="font-semibold text-lg text-text-primary group-hover:text-indigo-400 transition-colors">Discord</span>
                        <p class="text-text-muted text-sm">Topluluğa katıl</p>
                    </div>
                    <svg class="w-5 h-5 text-text-muted group-hover:text-indigo-400 group-hover:translate-x-1 transition-all" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                    </svg>
                </a>

                <!-- Spotify -->
                <a href="https://open.spotify.com/user/31BVTrB47erypG3tevi1U9Fv6BbNUBEiuiX" target="_blank" rel="noopener noreferrer"
                    class="link-card glass-card flex items-center gap-4 px-6 py-4 group">
                    <div class="w-12 h-12 rounded-xl bg-green-600/20 flex items-center justify-center flex-shrink-0 group-hover:bg-green-600/30 transition-colors">
                        <svg class="w-6 h-6 text-green-400" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M12 0C5.4 0 0 5.4 0 12s5.4 12 12 12 12-5.4 12-12S18.66 0 12 0zm5.521 17.34c-.24.359-.66.48-1.021.24-2.82-1.74-6.36-2.101-10.561-1.141-.418.122-.779-.179-.899-.539-.12-.421.18-.78.54-.9 4.56-1.021 8.52-.6 11.64 1.32.42.18.479.659.301 1.02zm1.44-3.3c-.301.42-.841.6-1.262.3-3.239-1.98-8.159-2.58-11.939-1.38-.479.12-1.02-.12-1.14-.6-.12-.48.12-1.021.6-1.141C9.6 9.9 15 10.561 18.72 12.84c.361.181.54.78.241 1.2zm.12-3.36C15.24 8.4 8.82 8.16 5.16 9.301c-.6.179-1.2-.181-1.38-.721-.18-.601.18-1.2.72-1.381 4.26-1.26 11.28-1.02 15.721 1.621.539.3.719 1.02.419 1.56-.299.421-1.02.599-1.559.3z"/>
                        </svg>
                    </div>
                    <div class="text-left flex-1">
                        <span class="font-semibold text-lg text-text-primary group-hover:text-green-400 transition-colors">Spotify</span>
                        <p class="text-text-muted text-sm">Müzik listem</p>
                    </div>
                    <svg class="w-5 h-5 text-text-muted group-hover:text-green-400 group-hover:translate-x-1 transition-all" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                    </svg>
                </a>

               
                    <div class="text-left flex-1">
                        <span class="font-semibold text-lg text-text-primary group-hover:text-pink-400 transition-colors">Guns.lol</span>
                        <p class="text-text-muted text-sm">Profilime göz at</p>
                    </div>
                    <svg class="w-5 h-5 text-text-muted group-hover:text-pink-400 group-hover:translate-x-1 transition-all" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                    </svg>
                </a>
            </div>

            <!-- Scroll indicator -->
            <div class="animate-bounce text-text-muted mt-16">
                <svg class="w-6 h-6 mx-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3"/>
                </svg>
                <span class="text-sm mt-1 block">Çarkıfelek</span>
            </div>
        </div>
    </section>

    <!-- Çarkıfelek Section -->
    <section class="py-20 bg-dark-800 relative border-t border-dark-400" id="carkifelek">
        <div class="absolute inset-0 bg-grid opacity-50"></div>
        <div class="gradient-orb w-[400px] h-[400px] bg-purple-600/10 top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 pointer-events-none z-0"></div>

        <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10">
            <div class="text-center mb-12">
                <h2 class="font-display text-3xl md:text-4xl lg:text-5xl font-bold mb-4">
                    <span class="text-gradient">Çarkıfelek</span>
                </h2>
                <p class="text-text-secondary text-lg max-w-lg mx-auto">Seçeneklerini ekle, çarkı çevir ve kaderini belirle!</p>
            </div>

            <div class="grid lg:grid-cols-2 gap-8 lg:gap-12 items-start">
                <!-- Input Panel -->
                <div class="glass-card p-6 sm:p-8">
                    <h3 class="font-display text-xl font-bold mb-6 flex items-center gap-3">
                        <div class="w-10 h-10 rounded-lg bg-accent/20 flex items-center justify-center">
                            <svg class="w-5 h-5 text-accent" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"/>
                            </svg>
                        </div>
                        Seçenek Ekle
                    </h3>

                    <div class="flex gap-3 mb-6">
                        <input type="text" id="optionInput" placeholder="Bir seçenek yaz..."
                            class="flex-1 bg-dark-700 border border-dark-400 rounded-xl px-4 py-3 text-text-primary placeholder-text-muted focus:outline-none focus:border-accent focus:ring-1 focus:ring-accent/50 transition-all font-body"
                            onkeydown="if(event.key==='Enter')addOption()">
                        <button onclick="addOption()"
                            class="btn-primary px-5 py-3 rounded-xl font-semibold text-white flex-shrink-0">
                            <span>Ekle</span>
                        </button>
                    </div>

                    <!-- Options list -->
                    <div id="optionsList" class="space-y-2 mb-6 max-h-64 overflow-y-auto pr-1">
                        <div id="emptyState" class="text-center py-8">
                            <svg class="w-12 h-12 mx-auto text-text-muted mb-3 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"/>
                            </svg>
                            <p class="text-text-muted text-sm">Henüz seçenek eklenmedi</p>
                        </div>
                    </div>

                    <div class="flex gap-3">
                        <button onclick="spinWheel()"
                            id="spinBtn"
                            class="btn-primary flex-1 py-4 rounded-xl font-bold text-lg text-white animate-pulse-glow disabled:opacity-50 disabled:cursor-not-allowed disabled:animate-none"
                            disabled>
                            <span class="flex items-center justify-center gap-2">
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"/>
                                </svg>
                                Döndür!
                            </span>
                        </button>
                        <button onclick="clearAll()"
                            class="px-5 py-4 rounded-xl font-semibold text-text-secondary border border-dark-400 hover:border-red-500/50 hover:text-red-400 transition-all">
                            Temizle
                        </button>
                    </div>
                </div>

                <!-- Wheel Panel -->
                <div class="flex flex-col items-center">
                    <div class="wheel-container mb-8" id="wheelContainer">
                        <div class="wheel-pointer"></div>
                        <canvas id="wheelCanvas" class="wheel-canvas" width="400" height="400"></canvas>
                        <div class="wheel-center"></div>
                    </div>

                    <!-- Result display -->
                    <div id="resultBox" class="hidden w-full max-w-sm">
                        <div class="glass-card p-6 text-center border-accent/30 result-popup">
                            <p class="text-text-secondary text-sm mb-2 font-medium uppercase tracking-wider">Sonuç</p>
                            <p id="resultText" class="font-display text-2xl sm:text-3xl font-bold text-gradient"></p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-dark-900 border-t border-dark-400 py-8 relative">
        <div class="absolute inset-0 bg-grid opacity-20"></div>
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center relative z-10">
            <p class="text-text-muted text-sm">&copy; 2026 FahriCan. Tüm hakları saklıdır.</p>
        </div>
    </footer>

    <script>
        // Particles
        const particlesContainer = document.getElementById('particles');
        for (let i = 0; i < 30; i++) {
            const p = document.createElement('div');
            p.className = 'particle';
            p.style.left = Math.random() * 100 + '%';
            p.style.top = Math.random() * 100 + '%';
            p.style.animationDuration = (4 + Math.random() * 8) + 's';
            p.style.animationDelay = Math.random() * 5 + 's';
            p.style.width = (1 + Math.random() * 3) + 'px';
            p.style.height = p.style.width;
            particlesContainer.appendChild(p);
        }

        // Wheel state
        let options = [];
        let isSpinning = false;
        let currentRotation = 0;
        const canvas = document.getElementById('wheelCanvas');
        const ctx = canvas.getContext('2d');

        const wheelColors = [
            '#7c3aed', '#a855f7', '#6d28d9', '#8b5cf6',
            '#5b21b6', '#c084fc', '#4c1d95', '#d8b4fe',
            '#581c87', '#9333ea', '#6b21a8', '#a78bfa'
        ];

        function addOption() {
            const input = document.getElementById('optionInput');
            const val = input.value.trim();
            if (!val) return;
            if (options.length >= 20) {
                showToast('En fazla 20 seçenek ekleyebilirsin!', 'warn');
                return;
            }

            options.push(val);
            input.value = '';
            input.focus();
            renderOptions();
            drawWheel();
            updateSpinBtn();
        }

        function removeOption(index) {
            options.splice(index, 1);
            renderOptions();
            drawWheel();
            updateSpinBtn();
        }

        function clearAll() {
            options = [];
            renderOptions();
            drawWheel();
            updateSpinBtn();
            document.getElementById('resultBox').classList.add('hidden');
        }

        function updateSpinBtn() {
            document.getElementById('spinBtn').disabled = options.length < 2;
        }

        function renderOptions() {
            const list = document.getElementById('optionsList');
            const empty = document.getElementById('emptyState');

            // Remove all except emptyState
            Array.from(list.children).forEach(child => {
                if (child.id !== 'emptyState') child.remove();
            });

            if (options.length === 0) {
                empty.classList.remove('hidden');
                return;
            }

            empty.classList.add('hidden');

            options.forEach((opt, i) => {
                const div = document.createElement('div');
                div.className = 'tag-item flex items-center gap-3 bg-dark-600 rounded-lg px-4 py-3 group';
                div.innerHTML = `
                    <div class="w-3 h-3 rounded-full flex-shrink-0" style="background: ${wheelColors[i % wheelColors.length]}"></div>
                    <span class="flex-1 text-text-primary text-sm font-medium truncate">${escapeHtml(opt)}</span>
                    <button onclick="removeOption(${i})" class="text-text-muted hover:text-red-400 transition-colors flex-shrink-0 opacity-0 group-hover:opacity-100">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                        </svg>
                    </button>
                `;
                list.appendChild(div);
            });
        }

        function escapeHtml(text) {
            const d = document.createElement('div');
            d.textContent = text;
            return d.innerHTML;
        }

        function drawWheel() {
            const size = canvas.width;
            const center = size / 2;
            const radius = center - 4;
            ctx.clearRect(0, 0, size, size);

            if (options.length === 0) {
                // Empty state
                ctx.beginPath();
                ctx.arc(center, center, radius, 0, 2 * Math.PI);
                ctx.fillStyle = '#16161f';
                ctx.fill();
                ctx.strokeStyle = 'rgba(168,85,247,0.2)';
                ctx.lineWidth = 2;
                ctx.stroke();

                ctx.fillStyle = '#5a5a75';
                ctx.font = '500 16px Inter, sans-serif';
                ctx.textAlign = 'center';
                ctx.textBaseline = 'middle';
                ctx.fillText('Seçenek ekle', center, center);
                return;
            }

            const sliceAngle = (2 * Math.PI) / options.length;

            options.forEach((opt, i) => {
                const startAngle = i * sliceAngle;
                const endAngle = startAngle + sliceAngle;

                // Draw slice
                ctx.beginPath();
                ctx.moveTo(center, center);
                ctx.arc(center, center, radius, startAngle, endAngle);
                ctx.closePath();
                ctx.fillStyle = wheelColors[i % wheelColors.length];
                ctx.fill();

                // Slice border
                ctx.strokeStyle = 'rgba(0,0,0,0.3)';
                ctx.lineWidth = 1;
                ctx.stroke();

                // Text
                ctx.save();
                ctx.translate(center, center);
                ctx.rotate(startAngle + sliceAngle / 2);
                ctx.textAlign = 'right';
                ctx.textBaseline = 'middle';
                ctx.fillStyle = '#ffffff';

                const fontSize = options.length > 10 ? 11 : options.length > 6 ? 13 : 15;
                ctx.font = `600 ${fontSize}px Inter, sans-serif`;

                const maxWidth = radius - 40;
                let displayText = opt;
                if (ctx.measureText(displayText).width > maxWidth) {
                    while (ctx.measureText(displayText + '...').width > maxWidth && displayText.length > 0) {
                        displayText = displayText.slice(0, -1);
                    }
                    displayText += '...';
                }
                ctx.fillText(displayText, radius - 20, 0);
                ctx.restore();
            });

            // Outer ring glow
            ctx.beginPath();
            ctx.arc(center, center, radius, 0, 2 * Math.PI);
            ctx.strokeStyle = 'rgba(168,85,247,0.4)';
            ctx.lineWidth = 3;
            ctx.stroke();
        }

        function spinWheel() {
            if (isSpinning || options.length < 2) return;
            isSpinning = true;

            document.getElementById('resultBox').classList.add('hidden');
            document.getElementById('spinBtn').disabled = true;

            const sliceAngle = 360 / options.length;
            const extraSpins = 5 + Math.floor(Math.random() * 5); // 5-9 full rotations
            const randomAngle = Math.random() * 360;
            const totalRotation = extraSpins * 360 + randomAngle;

            const duration = 4000 + Math.random() * 2000;

            // Animate using requestAnimationFrame for smooth rotation
            const startTime = performance.now();
            const startRotation = currentRotation;
            const endRotation = currentRotation + totalRotation;

            function easeOut(t) {
                return 1 - Math.pow(1 - t, 3.5);
            }

            function animate(now) {
                const elapsed = now - startTime;
                const progress = Math.min(elapsed / duration, 1);
                const easedProgress = easeOut(progress);

                currentRotation = startRotation + totalRotation * easedProgress;

                // Redraw wheel with rotation
                ctx.save();
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                ctx.translate(canvas.width / 2, canvas.height / 2);
                ctx.rotate((currentRotation * Math.PI) / 180);
                ctx.translate(-canvas.width / 2, -canvas.height / 2);
                drawWheelRaw();
                ctx.restore();

                if (progress < 1) {
                    requestAnimationFrame(animate);
                } else {
                    // Determine winner
                    // The pointer is at the top (270 degrees or -90 degrees)
                    // We need to figure out which slice is at the top
                    const pointerAngle = ((270 - (currentRotation % 360)) % 360 + 360) % 360;
                    const winnerIndex = Math.floor(pointerAngle / sliceAngle) % options.length;

                    // Show result
                    const resultBox = document.getElementById('resultBox');
                    const resultText = document.getElementById('resultText');
                    resultText.textContent = options[winnerIndex];
                    resultBox.classList.remove('hidden');

                    // Re-trigger animation
                    resultBox.querySelector('.glass-card').classList.remove('result-popup');
                    void resultBox.querySelector('.glass-card').offsetWidth;
                    resultBox.querySelector('.glass-card').classList.add('result-popup');

                    isSpinning = false;
                    document.getElementById('spinBtn').disabled = false;
                }
            }

            requestAnimationFrame(animate);
        }

        function drawWheelRaw() {
            const size = canvas.width;
            const center = size / 2;
            const radius = center - 4;

            if (options.length === 0) return;

            const sliceAngle = (2 * Math.PI) / options.length;

            options.forEach((opt, i) => {
                const startAngle = i * sliceAngle;
                const endAngle = startAngle + sliceAngle;

                ctx.beginPath();
                ctx.moveTo(center, center);
                ctx.arc(center, center, radius, startAngle, endAngle);
                ctx.closePath();
                ctx.fillStyle = wheelColors[i % wheelColors.length];
                ctx.fill();

                ctx.strokeStyle = 'rgba(0,0,0,0.3)';
                ctx.lineWidth = 1;
                ctx.stroke();

                ctx.save();
                ctx.translate(center, center);
                ctx.rotate(startAngle + sliceAngle / 2);
                ctx.textAlign = 'right';
                ctx.textBaseline = 'middle';
                ctx.fillStyle = '#ffffff';

                const fontSize = options.length > 10 ? 11 : options.length > 6 ? 13 : 15;
                ctx.font = `600 ${fontSize}px Inter, sans-serif`;

                const maxWidth = radius - 40;
                let displayText = opt;
                if (ctx.measureText(displayText).width > maxWidth) {
                    while (ctx.measureText(displayText + '...').width > maxWidth && displayText.length > 0) {
                        displayText = displayText.slice(0, -1);
                    }
                    displayText += '...';
                }
                ctx.fillText(displayText, radius - 20, 0);
                ctx.restore();
            });

            ctx.beginPath();
            ctx.arc(center, center, radius, 0, 2 * Math.PI);
            ctx.strokeStyle = 'rgba(168,85,247,0.4)';
            ctx.lineWidth = 3;
            ctx.stroke();
        }

        function showToast(message, type = 'info') {
            const toast = document.createElement('div');
            toast.className = `fixed bottom-6 right-6 z-50 px-6 py-3 rounded-lg shadow-2xl text-white ${type === 'warn' ? 'bg-yellow-600' : 'bg-accent'}`;
            toast.textContent = message;
            document.body.appendChild(toast);
            setTimeout(() => toast.remove(), 3000);
        }

        // Initial draw
        drawWheel();

        // Music player
        const bgMusic = document.getElementById('bgMusic');
        const iconPlay = document.getElementById('iconPlay');
        const iconPause = document.getElementById('iconPause');
        const iconMuted = document.getElementById('iconMuted');
        const volumeSlider = document.getElementById('volumeSlider');
        const volumeLabel = document.getElementById('volumeLabel');
        let musicStarted = false;

        bgMusic.volume = 0.5;

        function tryAutoPlay() {
            if (musicStarted) return;
            bgMusic.play().then(() => {
                musicStarted = true;
                iconPlay.classList.add('hidden');
                iconPause.classList.remove('hidden');
                iconMuted.classList.add('hidden');
            }).catch(() => {
                // Browser blocked autoplay, show play icon and wait for interaction
                iconPlay.classList.remove('hidden');
            });
        }

        // Try autoplay immediately on page load
        tryAutoPlay();

        // Fallback: attempt on first user interaction if browser blocked autoplay
        ['click', 'touchstart', 'keydown', 'scroll'].forEach(evt => {
            document.addEventListener(evt, tryAutoPlay, { once: true });
        });

        function toggleMusic() {
            if (!musicStarted) {
                tryAutoPlay();
                return;
            }
            if (bgMusic.paused) {
                bgMusic.play();
                iconPlay.classList.add('hidden');
                iconPause.classList.remove('hidden');
                iconMuted.classList.add('hidden');
            } else {
                bgMusic.pause();
                iconPause.classList.add('hidden');
                iconMuted.classList.add('hidden');
                iconPlay.classList.remove('hidden');
            }
        }

        function changeVolume(val) {
            const v = val / 100;
            bgMusic.volume = v;
            volumeLabel.textContent = val + '%';
            volumeSlider.style.background = `linear-gradient(to right, #a855f7 ${val}%, #252535 ${val}%)`;
            if (v === 0) {
                iconPlay.classList.add('hidden');
                iconPause.classList.add('hidden');
                iconMuted.classList.remove('hidden');
            } else if (!bgMusic.paused) {
                iconPlay.classList.add('hidden');
                iconMuted.classList.add('hidden');
                iconPause.classList.remove('hidden');
            }
        }
    </script>
</body>

</html>

